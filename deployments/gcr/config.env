# Google Cloud Run Deployment Configuration
# Project: OpenClaw DevOps Platform

# =============================================================================
# GCP PROJECT SETTINGS
# =============================================================================

# GCP Project Configuration
GCP_PROJECT_ID=your-gcp-project-id
GCP_REGION=us-central1
GCP_ZONE=us-central1-a

# Container Registry / Artifact Registry
# Options: gcr.io (Container Registry) or REGION-docker.pkg.dev (Artifact Registry)
REGISTRY_TYPE=gcr.io
# REGISTRY_TYPE=${GCP_REGION}-docker.pkg.dev
# ARTIFACT_REGISTRY_REPO=openclaw-services

# =============================================================================
# CLOUD RUN SERVICE CONFIGURATION
# =============================================================================

# Service Names (must be unique within project and region)
LANDING_SERVICE_NAME=openclaw-landing
GATEWAY_SERVICE_NAME=openclaw-gateway
ASSISTANT_SERVICE_NAME=openclaw-assistant

# Docker Image Tags
LANDING_IMAGE_TAG=latest
GATEWAY_IMAGE_TAG=latest
ASSISTANT_IMAGE_TAG=latest

# Cloud Run Service Account (optional - uses default if not specified)
# SERVICE_ACCOUNT=openclaw-runner@${GCP_PROJECT_ID}.iam.gserviceaccount.com

# =============================================================================
# RESOURCE LIMITS & SCALING
# =============================================================================

# Landing Service
LANDING_CPU=1
LANDING_MEMORY=512Mi
LANDING_MIN_INSTANCES=0
LANDING_MAX_INSTANCES=10
LANDING_CONCURRENCY=80
LANDING_TIMEOUT=300

# Gateway Service
GATEWAY_CPU=2
GATEWAY_MEMORY=1Gi
GATEWAY_MIN_INSTANCES=1
GATEWAY_MAX_INSTANCES=20
GATEWAY_CONCURRENCY=50
GATEWAY_TIMEOUT=600

# Assistant Service
ASSISTANT_CPU=1
ASSISTANT_MEMORY=512Mi
ASSISTANT_MIN_INSTANCES=0
ASSISTANT_MAX_INSTANCES=10
ASSISTANT_CONCURRENCY=80
ASSISTANT_TIMEOUT=300

# =============================================================================
# NETWORKING & ACCESS
# =============================================================================

# Ingress Control
# Options: all, internal, internal-and-cloud-load-balancing
INGRESS=all

# Allow Unauthenticated Requests (public access)
# Set to false for internal services requiring authentication
ALLOW_UNAUTHENTICATED=true

# VPC Connector (optional - for connecting to VPC resources)
# VPC_CONNECTOR=projects/${GCP_PROJECT_ID}/locations/${GCP_REGION}/connectors/openclaw-vpc-connector
# VPC_EGRESS=all-traffic

# Custom Domains (optional)
# LANDING_DOMAIN=your-domain.com
# GATEWAY_DOMAIN=openclaw.your-domain.com
# ASSISTANT_DOMAIN=assistant.your-domain.com

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Cloud SQL (if using managed databases)
# CLOUD_SQL_INSTANCE=openclaw-sql
# CLOUD_SQL_CONNECTION_NAME=${GCP_PROJECT_ID}:${GCP_REGION}:${CLOUD_SQL_INSTANCE}

# MongoDB Atlas / External MongoDB
MONGODB_URI=mongodb+srv://user:password@cluster.mongodb.net/openclaw

# Redis (Memorystore or external)
REDIS_HOST=your-redis-host.com
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password

# =============================================================================
# SECRETS MANAGEMENT
# =============================================================================

# Secret Manager (recommended for production)
# Secrets will be mounted as environment variables
# Format: SECRET_NAME:latest (uses latest version)

USE_SECRET_MANAGER=false

# Secret names in Secret Manager (if USE_SECRET_MANAGER=true)
# NEXTAUTH_SECRET_NAME=nextauth-secret
# GOOGLE_CLIENT_SECRET_NAME=google-oauth-client-secret
# MONGODB_PASSWORD_SECRET_NAME=mongodb-password
# REDIS_PASSWORD_SECRET_NAME=redis-password

# =============================================================================
# ENVIRONMENT VARIABLES
# =============================================================================

# Node Environment
NODE_ENV=production
NEXT_TELEMETRY_DISABLED=1

# Timezone
TZ=UTC

# =============================================================================
# DEPLOYMENT SETTINGS
# =============================================================================

# Build Settings
BUILD_TIMEOUT=1200
BUILD_MACHINE_TYPE=n1-highcpu-8

# Deployment Strategy
# Options: rolling (zero downtime), blue-green
DEPLOYMENT_STRATEGY=rolling

# Revision Tags
REVISION_TAG=$(date +%Y%m%d-%H%M%S)

# Health Check Paths
LANDING_HEALTH_PATH=/
GATEWAY_HEALTH_PATH=/health
ASSISTANT_HEALTH_PATH=/

# =============================================================================
# LOGGING & MONITORING
# =============================================================================

# Cloud Logging
LOG_LEVEL=info

# Cloud Trace (distributed tracing)
ENABLE_TRACING=false

# Cloud Profiler (performance profiling)
ENABLE_PROFILER=false

# =============================================================================
# COST OPTIMIZATION
# =============================================================================

# CPU Allocation
# Options: 1 (always allocated), 0 (only during request processing)
CPU_ALWAYS_ALLOCATED=0

# Execution Environment
# Options: gen1 (first generation), gen2 (second generation - recommended)
EXECUTION_ENVIRONMENT=gen2
