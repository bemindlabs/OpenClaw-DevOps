# OpenClaw DevOps - Unified Environment Configuration
# Copy this file to .env and update with secure values
# This single .env file is used by all services in the monorepo

# ⚠️  SECURITY WARNING ⚠️
# =============================================================================
# ALL passwords below are EXAMPLE VALUES and MUST be changed for production!
#
# Quick setup:
#   1. cp .env.example .env
#   2. Run: ./scripts/generate-passwords.sh (auto-generates secure passwords)
#   3. OR manually replace all "CHANGE_ME_*" values with strong passwords
#
# Password requirements:
#   - Minimum 16 characters
#   - Mix of uppercase, lowercase, numbers, symbols
#   - Unique for each service (never reuse passwords)
#   - Store securely (use password manager or secrets vault)
# =============================================================================

# =============================================================================
# DOMAIN CONFIGURATION
# =============================================================================

# Main domain (update this for your deployment)
DOMAIN=your-domain.com
LANDING_DOMAIN=your-domain.com
GATEWAY_DOMAIN=openclaw.your-domain.com
ASSISTANT_DOMAIN=assistant.your-domain.com

# =============================================================================
# DATABASE CREDENTIALS
# ⚠️  CRITICAL: All passwords below are INSECURE EXAMPLES - MUST be changed!
# =============================================================================

# MongoDB Database
# Generate secure password: openssl rand -base64 32
MONGO_INITDB_ROOT_USERNAME=admin
MONGO_INITDB_ROOT_PASSWORD=CHANGE_ME_MONGO_ROOT_INSECURE_EXAMPLE
MONGO_DATABASE=openclaw
MONGO_USER=openclaw_user
MONGO_PASSWORD=CHANGE_ME_MONGO_USER_INSECURE_EXAMPLE
MONGODB_URI=mongodb://admin:CHANGE_ME_MONGO_ROOT_INSECURE_EXAMPLE@mongodb:27017/openclaw?authSource=admin

# PostgreSQL Database
# Generate secure password: openssl rand -base64 32
POSTGRES_USER=postgres_admin
POSTGRES_PASSWORD=CHANGE_ME_POSTGRES_INSECURE_EXAMPLE
POSTGRES_DB=openclaw
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Redis Cache & Session Store
# Generate secure password: openssl rand -base64 32
REDIS_PASSWORD=CHANGE_ME_REDIS_INSECURE_EXAMPLE
REDIS_HOST=redis
REDIS_PORT=6379

# =============================================================================
# WORKFLOW & MONITORING CREDENTIALS
# =============================================================================

# n8n Workflow Automation
# Generate secure password: openssl rand -base64 32
# Generate encryption key: openssl rand -hex 32
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=n8n_admin
N8N_BASIC_AUTH_PASSWORD=CHANGE_ME_N8N_INSECURE_EXAMPLE
N8N_ENCRYPTION_KEY=CHANGE_ME_32_HEX_CHARS_INSECURE_EXAMPLE

# Kafka Message Broker
KAFKA_BROKER_ID=1
KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181
KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://kafka:9092

# Grafana Monitoring Dashboard
# Generate secure password: openssl rand -base64 32
GF_SECURITY_ADMIN_USER=grafana_admin
GF_SECURITY_ADMIN_PASSWORD=CHANGE_ME_GRAFANA_INSECURE_EXAMPLE
GF_INSTALL_PLUGINS=grafana-clock-panel,grafana-simple-json-datasource

# Prometheus Metrics
# No authentication by default - configure reverse proxy with auth if exposing publicly

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Node Environment
NODE_ENV=production

# Next.js
NEXT_TELEMETRY_DISABLED=1

# Timezone
TZ=UTC

# =============================================================================
# LANDING PAGE SETTINGS
# =============================================================================

LANDING_PORT=3000
NEXT_PUBLIC_LANDING_DOMAIN=your-domain.com

# =============================================================================
# ASSISTANT PORTAL SETTINGS
# =============================================================================

ASSISTANT_PORT=5555
NEXT_PUBLIC_GATEWAY_URL=https://openclaw.your-domain.com

# NextAuth v5 Configuration
# AUTH_URL is used in production (with full domain)
# In development, NextAuth auto-detects from localhost
AUTH_URL=https://assistant.your-domain.com

# NextAuth v5 Secret (for session encryption and JWT signing)
# ⚠️  CRITICAL: This MUST be set or authentication will fail!
# Generate: openssl rand -base64 32
AUTH_SECRET=CHANGE_ME_AUTH_SECRET_32CHARS_INSECURE_EXAMPLE

# Google OAuth (for assistant portal authentication)
# Get credentials from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-google-oauth-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=CHANGE_ME_GOOGLE_SECRET_INSECURE_EXAMPLE

# Allowed OAuth Email Domains (comma-separated)
# Only users with email from these domains can log in to assistant portal
# Example: your-domain.com,trusted-partner.com
ALLOWED_OAUTH_DOMAINS=your-domain.com

# =============================================================================
# OPENCLAW GATEWAY SETTINGS
# =============================================================================

# Gateway Configuration
GATEWAY_PORT=18789
GATEWAY_MODE=local
GATEWAY_BIND=0.0.0.0

# Gateway Authentication Token (for API access)
# Generate: openssl rand -hex 32
# Required for all Docker service management endpoints
GATEWAY_AUTH_TOKEN=CHANGE_ME_GATEWAY_TOKEN_32CHARS_INSECURE_EXAMPLE

# CORS Allowed Origins (comma-separated)
# List specific domains allowed to access the gateway API
# Example: https://assistant.your-domain.com,https://your-domain.com
CORS_ORIGIN=https://assistant.your-domain.com,https://your-domain.com

# AI Model Settings
AI_MODEL_PRIMARY=google/gemini-flash-latest
MAX_CONCURRENT_AGENTS=4
MAX_CONCURRENT_SUBAGENTS=8

# Telegram Integration (optional)
# Get token from: https://t.me/BotFather
TELEGRAM_ENABLED=false
TELEGRAM_BOT_TOKEN=123456789:CHANGE_ME_TELEGRAM_TOKEN_INSECURE_EXAMPLE

# Deployment Mode
DEPLOYMENT_MODE=docker

# =============================================================================
# NETWORK SETTINGS
# =============================================================================

# Ports (default - can be changed if conflicts occur)
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443
MONGODB_PORT=27017
N8N_PORT=5678
KAFKA_PORT=9092
ZOOKEEPER_PORT=2181
GRAFANA_PORT=3001
PROMETHEUS_PORT=9090

# =============================================================================
# DATA PERSISTENCE
# =============================================================================

# Data directories (optional - uses Docker volumes by default)
# MONGO_DATA_DIR=./data/mongodb
# POSTGRES_DATA_DIR=./data/postgres
# REDIS_DATA_DIR=./data/redis
# N8N_DATA_DIR=./data/n8n
# KAFKA_DATA_DIR=./data/kafka
# GRAFANA_DATA_DIR=./data/grafana
# PROMETHEUS_DATA_DIR=./data/prometheus
