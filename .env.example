# OpenClaw DevOps - Unified Environment Configuration
# Copy this file to .env and update with secure values
# This single .env file is used by all services in the monorepo

# ⚠️  SECURITY WARNING ⚠️
# =============================================================================
# ALL passwords below are EXAMPLE VALUES and MUST be changed for production!
#
# Quick setup:
#   1. cp .env.example .env
#   2. Run: ./scripts/generate-passwords.sh (auto-generates secure passwords)
#   3. OR manually replace all "CHANGE_ME_*" values with strong passwords
#
# Password requirements:
#   - Minimum 16 characters
#   - Mix of uppercase, lowercase, numbers, symbols
#   - Unique for each service (never reuse passwords)
#   - Store securely (use password manager or secrets vault)
# =============================================================================

# =============================================================================
# DOMAIN CONFIGURATION
# =============================================================================

# Main domain (update this for your deployment)
DOMAIN=your-domain.com
LANDING_DOMAIN=your-domain.com
GATEWAY_DOMAIN=openclaw.your-domain.com
ASSISTANT_DOMAIN=assistant.your-domain.com
PORTAINER_DOMAIN=portainer.your-domain.com

# =============================================================================
# DATABASE CREDENTIALS
# ⚠️  CRITICAL: All passwords below are INSECURE EXAMPLES - MUST be changed!
# =============================================================================

# MongoDB Database
# Generate secure password: openssl rand -base64 32
MONGO_INITDB_ROOT_USERNAME=admin
MONGO_INITDB_ROOT_PASSWORD=CHANGE_ME_MONGO_ROOT_INSECURE_EXAMPLE
MONGO_DATABASE=openclaw
MONGO_USER=openclaw_user
MONGO_PASSWORD=CHANGE_ME_MONGO_USER_INSECURE_EXAMPLE
MONGODB_URI=mongodb://admin:CHANGE_ME_MONGO_ROOT_INSECURE_EXAMPLE@mongodb:27017/openclaw?authSource=admin

# PostgreSQL Database
# Generate secure password: openssl rand -base64 32
POSTGRES_USER=postgres_admin
POSTGRES_PASSWORD=CHANGE_ME_POSTGRES_INSECURE_EXAMPLE
POSTGRES_DB=openclaw
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Redis Cache & Session Store
# Generate secure password: openssl rand -base64 32
REDIS_PASSWORD=CHANGE_ME_REDIS_INSECURE_EXAMPLE
REDIS_HOST=redis
REDIS_PORT=6379

# =============================================================================
# WORKFLOW & MONITORING CREDENTIALS
# =============================================================================

# n8n Workflow Automation
# Generate secure password: openssl rand -base64 32
# Generate encryption key: openssl rand -hex 32
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=n8n_admin
N8N_BASIC_AUTH_PASSWORD=CHANGE_ME_N8N_INSECURE_EXAMPLE
N8N_ENCRYPTION_KEY=CHANGE_ME_32_HEX_CHARS_INSECURE_EXAMPLE

# Kafka Message Broker
KAFKA_BROKER_ID=1
KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181
KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://kafka:9092

# Grafana Monitoring Dashboard
# Generate secure password: openssl rand -base64 32
GF_SECURITY_ADMIN_USER=grafana_admin
GF_SECURITY_ADMIN_PASSWORD=CHANGE_ME_GRAFANA_INSECURE_EXAMPLE
GF_INSTALL_PLUGINS=grafana-clock-panel,grafana-simple-json-datasource

# Prometheus Metrics
# No authentication by default - configure reverse proxy with auth if exposing publicly

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Node Environment
NODE_ENV=production

# Next.js
NEXT_TELEMETRY_DISABLED=1

# Timezone
TZ=UTC

# =============================================================================
# LANDING PAGE SETTINGS
# =============================================================================

LANDING_PORT=3000
NEXT_PUBLIC_LANDING_DOMAIN=your-domain.com

# =============================================================================
# ASSISTANT PORTAL SETTINGS
# =============================================================================

ASSISTANT_PORT=5555
NEXT_PUBLIC_GATEWAY_URL=https://openclaw.your-domain.com

# NextAuth v5 Configuration
# AUTH_URL is used in production (with full domain)
# In development, NextAuth auto-detects from localhost
AUTH_URL=https://assistant.your-domain.com

# NextAuth v5 Secret (for session encryption and JWT signing)
# ⚠️  CRITICAL: This MUST be set or authentication will fail!
# Generate: openssl rand -base64 32
AUTH_SECRET=CHANGE_ME_AUTH_SECRET_32CHARS_INSECURE_EXAMPLE

# Google OAuth (for assistant portal authentication)
# Get credentials from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-google-oauth-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=CHANGE_ME_GOOGLE_SECRET_INSECURE_EXAMPLE

# Allowed OAuth Email Domains (comma-separated)
# Only users with email from these domains can log in to assistant portal
# Example: your-domain.com,trusted-partner.com
ALLOWED_OAUTH_DOMAINS=your-domain.com

# =============================================================================
# OPENCLAW GATEWAY SETTINGS
# =============================================================================

# Gateway Configuration
GATEWAY_PORT=18789
GATEWAY_MODE=local
GATEWAY_BIND=0.0.0.0

# Gateway Authentication Token (for API access)
# Generate: openssl rand -hex 32
# Required for all Docker service management endpoints
GATEWAY_AUTH_TOKEN=CHANGE_ME_GATEWAY_TOKEN_32CHARS_INSECURE_EXAMPLE

# CORS Allowed Origins (comma-separated)
# List specific domains allowed to access the gateway API
# Example: https://assistant.your-domain.com,https://your-domain.com
CORS_ORIGIN=https://assistant.your-domain.com,https://your-domain.com

# AI Model Settings
AI_MODEL_PRIMARY=google/gemini-flash-latest
AI_MODEL_FALLBACK=openai/gpt-4o-mini
MAX_CONCURRENT_AGENTS=4
MAX_CONCURRENT_SUBAGENTS=8

# =============================================================================
# PORTAINER - DOCKER MANAGEMENT UI
# =============================================================================

# Portainer Configuration
PORTAINER_PORT=9000
PORTAINER_EDGE_PORT=8000

# =============================================================================
# LLM API KEYS - AI Model Providers
# ⚠️  Add keys for LLM providers you want to use with OpenClaw
# =============================================================================

# OpenAI (GPT-4, GPT-3.5, GPT-4o)
# Get API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-CHANGE_ME_OPENAI_KEY_INSECURE_EXAMPLE
OPENAI_ORG_ID=org-CHANGE_ME_OPTIONAL

# Anthropic Claude (Claude 3.5 Sonnet, Claude 3 Opus, Claude 3 Haiku)
# Get API key from: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=sk-ant-CHANGE_ME_ANTHROPIC_KEY_INSECURE_EXAMPLE

# Google AI Studio (Gemini Pro, Gemini Flash)
# Get API key from: https://makersuite.google.com/app/apikey
GOOGLE_AI_API_KEY=CHANGE_ME_GOOGLE_AI_KEY_INSECURE_EXAMPLE
GOOGLE_PROJECT_ID=your-gcp-project-id

# Google Vertex AI (Alternative to AI Studio for production)
# Set up service account: https://cloud.google.com/vertex-ai/docs/authentication
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json
VERTEX_AI_PROJECT=your-gcp-project-id
VERTEX_AI_LOCATION=us-central1

# Mistral AI (Mistral Large, Mistral Medium, Mistral Small)
# Get API key from: https://console.mistral.ai/api-keys
MISTRAL_API_KEY=CHANGE_ME_MISTRAL_KEY_INSECURE_EXAMPLE

# Cohere (Command, Command-R, Command-R+)
# Get API key from: https://dashboard.cohere.com/api-keys
COHERE_API_KEY=CHANGE_ME_COHERE_KEY_INSECURE_EXAMPLE

# Hugging Face (Access to 100K+ models)
# Get API key from: https://huggingface.co/settings/tokens
HUGGINGFACE_API_KEY=hf_CHANGE_ME_HUGGINGFACE_KEY_INSECURE_EXAMPLE

# OpenRouter (Unified API for 100+ LLMs)
# Get API key from: https://openrouter.ai/keys
OPENROUTER_API_KEY=sk-or-CHANGE_ME_OPENROUTER_KEY_INSECURE_EXAMPLE

# Groq (Ultra-fast LLM inference)
# Get API key from: https://console.groq.com/keys
GROQ_API_KEY=gsk_CHANGE_ME_GROQ_KEY_INSECURE_EXAMPLE

# Together AI (Open-source models at scale)
# Get API key from: https://api.together.xyz/settings/api-keys
TOGETHER_API_KEY=CHANGE_ME_TOGETHER_KEY_INSECURE_EXAMPLE

# Replicate (Run and fine-tune models)
# Get API key from: https://replicate.com/account/api-tokens
REPLICATE_API_TOKEN=r8_CHANGE_ME_REPLICATE_KEY_INSECURE_EXAMPLE

# Perplexity AI (Search-augmented LLMs)
# Get API key from: https://www.perplexity.ai/settings/api
PERPLEXITY_API_KEY=pplx-CHANGE_ME_PERPLEXITY_KEY_INSECURE_EXAMPLE

# Azure OpenAI (Enterprise OpenAI models)
# Get credentials from: https://portal.azure.com/
AZURE_OPENAI_API_KEY=CHANGE_ME_AZURE_OPENAI_KEY_INSECURE_EXAMPLE
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4
AZURE_OPENAI_API_VERSION=2024-02-15-preview

# AWS Bedrock (Claude, Llama, Mistral on AWS)
# Configure AWS credentials: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html
AWS_ACCESS_KEY_ID=CHANGE_ME_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=CHANGE_ME_AWS_SECRET_KEY
AWS_REGION=us-east-1
AWS_BEDROCK_MODEL_ID=anthropic.claude-3-5-sonnet-20241022-v2:0

# Ollama (Local LLM inference)
# Install Ollama: https://ollama.ai/download
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3.2:latest

# LM Studio (Local LLM inference with UI)
# Download from: https://lmstudio.ai/
LMSTUDIO_BASE_URL=http://localhost:1234/v1

# Moonshot AI / Kimi (Chinese LLM - Moonshot-v1)
# Get API key from: https://platform.moonshot.cn/console/api-keys
MOONSHOT_API_KEY=CHANGE_ME_MOONSHOT_KEY_INSECURE_EXAMPLE
MOONSHOT_BASE_URL=https://api.moonshot.cn/v1

# =============================================================================
# LLM CONFIGURATION - Model Selection & Routing
# =============================================================================

# Primary LLM provider (openai|anthropic|google|mistral|openrouter|groq)
LLM_PROVIDER=openai

# Model routing by task type (optional - overrides LLM_PROVIDER for specific tasks)
LLM_CHAT_MODEL=openai/gpt-4o
LLM_COMPLETION_MODEL=anthropic/claude-3-5-sonnet-20241022
LLM_EMBEDDING_MODEL=openai/text-embedding-3-small
LLM_CODE_MODEL=openai/gpt-4o
LLM_REASONING_MODEL=anthropic/claude-3-5-sonnet-20241022

# LLM Settings
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=4096
LLM_TOP_P=1.0
LLM_FREQUENCY_PENALTY=0.0
LLM_PRESENCE_PENALTY=0.0

# Rate Limiting (requests per minute)
LLM_RATE_LIMIT_RPM=60
LLM_RATE_LIMIT_TPM=90000

# Fallback Configuration
LLM_ENABLE_FALLBACK=true
LLM_FALLBACK_PROVIDERS=anthropic,google,mistral

# Cost Tracking
LLM_ENABLE_COST_TRACKING=true
LLM_MONTHLY_BUDGET_USD=100

# Telegram Integration (optional)
# Get token from: https://t.me/BotFather
TELEGRAM_ENABLED=false
TELEGRAM_BOT_TOKEN=123456789:CHANGE_ME_TELEGRAM_TOKEN_INSECURE_EXAMPLE

# Deployment Mode
DEPLOYMENT_MODE=docker

# =============================================================================
# NETWORK SETTINGS
# =============================================================================

# Ports (default - can be changed if conflicts occur)
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443
MONGODB_PORT=27017
N8N_PORT=5678
KAFKA_PORT=9092
ZOOKEEPER_PORT=2181
GRAFANA_PORT=3001
PROMETHEUS_PORT=9090

# =============================================================================
# DATA PERSISTENCE
# =============================================================================

# Data directories (optional - uses Docker volumes by default)
# MONGO_DATA_DIR=./data/mongodb
# POSTGRES_DATA_DIR=./data/postgres
# REDIS_DATA_DIR=./data/redis
# N8N_DATA_DIR=./data/n8n
# KAFKA_DATA_DIR=./data/kafka
# GRAFANA_DATA_DIR=./data/grafana
# PROMETHEUS_DATA_DIR=./data/prometheus
