# US-009: Contact Form Integration

## Story Details

| Field | Value |
|-------|-------|
| **Story ID** | US-009 |
| **Epic** | EPIC-LANDING |
| **Title** | Contact Form Integration |
| **Priority** | Medium |
| **Story Points** | 3 |
| **Status** | Ready |
| **Assignee** | Unassigned |
| **Sprint** | Sprint 2 |

## User Story

**As a** visitor interested in OpenClaw,
**I want** to submit a contact form,
**So that** I can get in touch with the team for questions or enterprise inquiries.

## Description

Create a contact form section with fields for name, email, company (optional), and message. The form should validate inputs, show loading state during submission, and display success/error feedback. Form submissions should be sent to the Gateway API for processing.

## Acceptance Criteria

- [ ] Form fields: Name, Email, Company (optional), Message
- [ ] Client-side validation with clear error messages
- [ ] Email format validation
- [ ] Required fields marked with asterisk
- [ ] Loading state during submission
- [ ] Success message displayed after submission
- [ ] Error message displayed on failure
- [ ] Form clears after successful submission
- [ ] Protected against spam (honeypot or reCAPTCHA)
- [ ] Accessible: labels, error announcements, focus management

## Technical Notes

### IEEE Requirement References
- IEEE-STD-LAND-003: Accessibility

### Form Component

```tsx
// components/landing/contact-form.tsx
import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import * as z from "zod";

const formSchema = z.object({
  name: z.string().min(2, "Name must be at least 2 characters"),
  email: z.string().email("Please enter a valid email"),
  company: z.string().optional(),
  message: z.string().min(10, "Message must be at least 10 characters"),
});

export function ContactForm() {
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [submitted, setSubmitted] = useState(false);

  const form = useForm<z.infer<typeof formSchema>>({
    resolver: zodResolver(formSchema),
  });

  async function onSubmit(data: z.infer<typeof formSchema>) {
    setIsSubmitting(true);
    try {
      await fetch("/api/contact", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data),
      });
      setSubmitted(true);
      form.reset();
    } catch (error) {
      form.setError("root", { message: "Failed to submit. Please try again." });
    } finally {
      setIsSubmitting(false);
    }
  }

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-6">
        {/* Form fields */}
      </form>
    </Form>
  );
}
```

### API Route

```tsx
// app/api/contact/route.ts
export async function POST(req: Request) {
  const data = await req.json();

  // Validate honeypot field (spam protection)
  if (data.website) {
    return Response.json({ success: true }); // Silent fail for bots
  }

  // Forward to gateway or email service
  await fetch(`${process.env.GATEWAY_URL}/api/contact`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data),
  });

  return Response.json({ success: true });
}
```

### Spam Protection Options

1. **Honeypot Field** (Recommended for MVP)
   - Hidden field that bots fill but humans don't
   - No third-party dependencies

2. **reCAPTCHA v3** (For production)
   - Google's invisible captcha
   - Requires API keys

### Form Section Layout

```tsx
// components/landing/contact.tsx
export function Contact() {
  return (
    <section id="contact" className="py-20">
      <div className="container max-w-2xl">
        <h2 className="text-3xl font-bold text-center mb-4">
          Get in touch
        </h2>
        <p className="text-center text-muted-foreground mb-8">
          Have questions? We'd love to hear from you.
        </p>
        <ContactForm />
      </div>
    </section>
  );
}
```

### Files to Create/Modify
- `apps/landing/components/landing/contact-form.tsx`
- `apps/landing/components/landing/contact.tsx`
- `apps/landing/app/api/contact/route.ts`
- `apps/landing/app/page.tsx` (import contact)

## Dependencies

- react-hook-form for form handling
- zod for validation
- shadcn/ui Form components
- Gateway API endpoint for submissions

## Definition of Done

- [ ] Form renders all fields correctly
- [ ] Validation works for all fields
- [ ] Submission sends data to API
- [ ] Success/error states display properly
- [ ] Form is accessible (tab navigation, screen readers)
- [ ] Spam protection implemented
- [ ] API endpoint handles submissions

---

*Created: 2026-02-08*
