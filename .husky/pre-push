#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "üöÄ Running pre-push checks..."

# Build all apps to ensure they compile
echo "üèóÔ∏è  Building all apps..."
pnpm build:all

# Optional: Run security scan before push
# Uncomment to enable security scanning on every push
# echo "üîí Running security scan..."
# if command -v trivy &> /dev/null && command -v semgrep &> /dev/null; then
#   echo "  ‚Ä¢ Scanning for vulnerabilities (Trivy)..."
#   trivy fs --severity CRITICAL,HIGH --exit-code 0 . > /dev/null 2>&1 || echo "‚ö†Ô∏è  Vulnerabilities found"
#   echo "  ‚Ä¢ Scanning code (Semgrep)..."
#   semgrep scan --config auto --config p/security-audit --error --quiet . || echo "‚ö†Ô∏è  Security issues found"
# else
#   echo "‚ö†Ô∏è  Security tools not installed. Run: make security-install"
# fi

echo "‚úÖ All pre-push checks passed!"
